<!DOCTYPE html>
<html>
<head>
  <title>Embedding Vega-Lite</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@4.3.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@3.0.0-rc8"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@3.20"></script>
  <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.11/lodash.min.js"></script>
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
</head>
<body>
  <a href="https://vega.github.io/editor/#/url/vega-lite/N4KABGBEAkDODGALApgWwIaQFxUQFzwAdYsB6UgN2QHN0A6agSz0QFcAjOxge1IRQyUa6ALQAbZskoBmOgAY6AK1jcAdpAA04KABNkCAE6NCeHupyQAgmFiNUhMchvx0BZAbAPueMAHdmiGBo7Mg6ejpgOq70mtqQUXiYOKAQEJAU6GKs+thgANraqWDAkACyyIkI3AbIuQAcAEwaUP6qsLkAjB0AvlpFECXllfDVtTgArE0tjG25AGy9hamDFehVNbnjcs2Qre04HQ2L-cVlq+tjYADs29OzOA1Hff0rw6PzVzt7udLjxy9nN4bHBzDpfGb7a7-IqvNYjYHXW67CG5AAs0OWgLh7wmAE5wfcwOjnjCsRdclcwXdIR1cRiBmT4ZcruMCTSuvTTkNsQiGqzqZ1ObDyThpFNkYSOnIhYycUSkd8JjLuSKwHMFSiQcrzky0XM2WjtUDLqiqRLIQsSZiVbqcFdPgKDsSlgybXK5vjHWAOlcjTyTeLFd6-lbXTq5biNYSrs6TsLbWA6magx06n7VdJPeb5umE6i6galaGueGEabC4nc3KrlmU9Li-Hq9IK9JYwC3QjxrXNd60w3ZQi6gWvQ16y6S8b5qiW09x43O8mew1LXOB5dxovCSHVx2TcPs3aqwi5tOvR1pEfmc2vb7+7vNt3CW3SfecKiHQewNu42uPhXxhed6luuj7speFLXp+HTfu2wF6hWPrgRMUY0mOP6vkSgY9jBL5wXap6fs+1p4USBEpoBO4kfmFYruhVH7nWSGJmRPbSLRsGTnaDE9ueTG4lhkq8UBnFqixkq3pRImNP+PTCf68woZsTGoqBhpyaqcwCZCOHESJXYtkxmkVqOhmQSmsmSfJExiTS7G4VJH7mX2lmqlcZk8XZulWUS+ojspjk9kRYYiXMvmfhRdEhTZuSzpF3lzNxhKecF3momFQYSXFGlafUpktslE7ebi0UHLimUcUVilvs5WV5olkIRRVGaqQcTFuf+hmbtp-kdepCbSWeQWFaqkY0TpKWquWfl9XKdTuYSDSNfZ3ksghNVNQm4z8p+dIzZ2AVPm1OVOm1VXekN86XCeCEWbVs1dWiS1ea5800hdv44EmCFPRNCarYNhn1TF43Df1Z3Lkx4xA4ee3MgdNLrctrnHd6sUbXKkwIeVSN5ulPYFZdmzQ1CsMQcZ2PPXVxmQ69aJozjEZ40l70YZmBmk9VCFMXU21BhDHNqrzPa7S5f0PSdAtbMZaHo8e4tgCZkvEyDhN4uzovVvLt2y+uxMsyRoLq3dnZM5CDQi8bV4IfrIm4kLhJ1BbOtoi1RKGfbqFta7isa4OKPQfTlMY-DnQywzZbyz9oMY7TMO+5cA2fotbWx6j3PEzGyklQrYdBwiVzE4jeeXL8CEqx9iapzzbXy074fMtnfKQ8T2v1xSKNR6r1zZwH7tl83xmB79wcVhTw+dqn0it8XuT8f+Rfj+uIdFvHaLE53FfjMv3op71q8gqbs-KR7MVZ3vltoifBzT4vdMIbnt+fdvqLlxhqLZ6-Bu14Zh8HATFdzCvmAOuM8cC4l-grMUkMgFj2jsef2Q84EN1HrAruRkzyoIrlcCBjw2o93-hhf6UFP56QgVKJiYpz7OzVjebmqc3KnSoW3O0EDJiGUbjfJB7djIbwwuqUehlt4Ly4Z9M60hMF8KAYhSWECbbxW3g0YRXdioVlxLwg2ECJEkX0gDAWX0vRb0ht7ZSZ0OgEKoj3ORrk9YkPikAhoWiRL2hbJwtB8srF-SkeYpx29oJ9xHOokSL8uYCxUhWB+Iju5MNAWqV2HimwVniceXxiCu5Q2pgLbBWN-FQVSRXHmCEjhLAALraH+JADABgADWuRICEG4DMPAsQ0jIFUCMHQMxqC5BSKkSAAAPbpkAABmjBkBiB0LU+8Ow8AAE9CCXEgAAR1YOgVQphEimCoJADEkAZmDJGWMiZFhvjTLmQs5Zqz1muEYFs7oZTniQBGKoEZXTkh3O6EAA">Example</a>
  <div id="vis"></div>

  <script type="text/javascript">
    let cleanData;
    let wins
    jQuery.getJSON( "https://gist.githubusercontent.com/sxywu/b94eb86c807b05080d7ee470bd1e815c/raw/bc0e59845dae332100acaa73f510580ccbe317bd/110_movies.json", function(data) {

      cleanData = _.map(data, function(d) {
        wins = d.Awards.match(/(\d+) win/);
        return {
          Metascore: +d.Metascore,
          wins: (wins ? +wins [1] : 0)
        }
      });

      var yourVlSpec = {
        "$schema": "https://vega.github.io/schema/vega-lite/v3.0.json",
        "description": "A simple scatter plot with embedded data.",
        "data": {"values": cleanData },
        "mark": "point",
        "encoding": {
          "x": { "field": "Metascore", "type": "quantitative"},
          "y": { "field": "wins", "type": "quantitative"}
        }
      }

      vegaEmbed("#vis", yourVlSpec);
    });
  </script>
</body>
</html>
